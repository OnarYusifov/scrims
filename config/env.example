# ============================================
# TRAYB Customs Environment Template
# See config/env.schema.json for the canonical schema.
# After editing a copy, run:
#   npm run env:check
#   npm run setup_env
# ============================================

# --- Core URLs (shared) ------------------------------------------------------
NODE_ENV=development
FRONTEND_URL=http://localhost:4000
FRONTEND_INTERNAL_URL=http://localhost:4000
NEXT_PUBLIC_API_URL=http://localhost:4001
NEXT_PUBLIC_APP_URL=http://localhost:4000
NEXTAUTH_URL=http://localhost:4000
CORS_ORIGIN=http://localhost:4000

# --- Local service ports -----------------------------------------------------
BACKEND_PORT=4001
FRONTEND_PORT=4000

# --- Hosting overrides (set per Dokploy/Railpack service) --------------------
# PORT=4001
# HOST=0.0.0.0

# --- Logging & observability -------------------------------------------------
LOG_LEVEL=info
PRETTY_LOGS=true
TRUST_PROXY=true
RATE_LIMIT_MAX=600
RATE_LIMIT_WINDOW="1 minute"
METRIC_PREFIX=trayb_
CLUSTER_WORKERS=1
UNDER_PRESSURE_MAX_EVENT_LOOP_DELAY=1000
UNDER_PRESSURE_MAX_HEAP_BYTES=268435456
BULLMQ_METRICS_POLL_MS=15000

# --- Datastores --------------------------------------------------------------
DATABASE_URL=postgresql://postgres:password@localhost:5432/trayb_customs?schema=public
REDIS_URL=redis://localhost:6379

# --- Secrets (fill in for every environment; never commit real values) -------
JWT_SECRET=
SESSION_SECRET=
AUTH_SECRET=
DISCORD_CLIENT_SECRET=
DISCORD_BOT_TOKEN=
RANDOM_ORG_API_KEY=
LOADTEST_BEARER=
TURBO_TOKEN=
TURBO_REMOTE_CACHE_SIGNATURE_KEY=

# --- Discord Integration -----------------------------------------------------
DISCORD_CLIENT_ID=
DISCORD_REDIRECT_URI=http://localhost:4001/api/core-auth/discord/callback
DISCORD_GUILD_ID=
DISCORD_LOBBY_CHANNEL_ID=
DISCORD_TEAM_ALPHA_CHANNEL_ID=
DISCORD_TEAM_BRAVO_CHANNEL_ID=
DISCORD_RESULTS_CHANNEL_ID=
DISCORD_ROLE_UNRANKED=
DISCORD_ROLE_WOOD=
DISCORD_ROLE_BRONZE=
DISCORD_ROLE_SILVER=
DISCORD_ROLE_GOLD=
DISCORD_ROLE_PLATINUM=
DISCORD_ROLE_DIAMOND=
DISCORD_ROLE_EMERALD=
DISCORD_ROLE_RUBY=
DISCORD_ROLE_GOD=
DISCORD_WHITELISTED_IDS=
# Automatically grant ROOT role to specific Discord IDs (comma-separated)
DISCORD_ROOT_IDS=

# --- Matchmaking / ELO settings ---------------------------------------------
ELO_START_RATING=800
ELO_CALIBRATION_MATCHES=10
ELO_CALIBRATION_K_FACTOR=48
ELO_NORMAL_K_FACTOR=32
ELO_HIGH_ELO_K_FACTOR=24
ELO_HIGH_ELO_THRESHOLD=1600
ELO_MAX_CHANGE_PER_SERIES=150

# --- Cache & realtime tuning -------------------------------------------------
CACHE_PROFILE_TTL=60
CACHE_PROFILE_FULL_TTL=120
CACHE_MATCH_LIST_TTL=15
CACHE_MATCH_SNAPSHOT_TTL=30
SSE_HEARTBEAT_INTERVAL_MS=15000
SSE_CLIENT_QUEUE_LIMIT=100
REALTIME_STREAM_KEY=trayb:events:realtime
REALTIME_STREAM_GROUP=realtime-consumers
REALTIME_STREAM_MAXLEN=5000
REALTIME_STREAM_READ_COUNT=50
REALTIME_STREAM_READ_BLOCK_MS=5000

# --- Production data safe-use ------------------------------------------------
PROD_REPLICA_URL=
SHADOW_DATABASE_URL=

# --- Load testing harness ----------------------------------------------------
LOADTEST_BASE_URL=http://localhost:4001
LOADTEST_ALLOWED_HOSTS=localhost
LOADTEST_ALLOW_PROD=false
LOADTEST_CONNECTIONS=
LOADTEST_DURATION=
LOADTEST_TIMEOUT=
LOADTEST_PIPELINING=

# --- Turborepo Remote Cache (CI / Deploy) ------------------------------------
TURBO_TEAM=
TURBO_API=

# --- Misc --------------------------------------------------------------------
DEBUG_OPGG_HTML=false

