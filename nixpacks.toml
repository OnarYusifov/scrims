[phases.setup]
aptPkgs = [
  'build-essential',
  'python3',
  'pkg-config',
  'libcairo2-dev',
  'libpango1.0-dev',
  'libjpeg-dev',
  'libgif-dev',
  'librsvg2-dev',
  'libpng-dev',
  'libpixman-1-dev',
  'zlib1g-dev'
]

[phases.install]
cmds = ['npm ci --workspace=@trayb/backend']

[phases.build]
cmds = [
  'npx prisma generate --schema=./apps/backend/prisma/schema.prisma',
  'npm run build --workspace=@trayb/backend'
]

[start]
cmd = 'cd apps/backend && node dist/index.js'

